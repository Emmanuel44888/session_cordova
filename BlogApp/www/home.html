<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/materialize.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <title>Home</title>
</head>

<body>

  <nav>
    <div class="nav-wrapper">
      <a href="#!" class="brand-logo">Logo</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">apps</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="home.html" class="blue darken-4">HOME</a></li>
        <li><a href="contact.html" class="blue darken-4">Contact</a></li>
        <li><a href="information.html" class="blue darken-4">Information</a></li>
        <li><a href="blog.html" class="blue darken-4">Blog</a></li>
      </ul>
    </div>
  </nav>
  <h4 style="text-align: center;">Space News</h4>
  <ul class="sidenav" id="mobile-demo" class="blue darken-1">
    <h5 style="text-align: center;">Space News</h5>
    <div class="row">
      <div class="col s12 m12">
        <div class="card">
          <div class="card-image">
            <img src="./img/img2.jpg">
            <span class="card-title"></span>
          </div>
          <div class="card-content">
            <p>22/04 :ACTUALITES
              VIDÉO</p>
              <br>
              <p>Espace : l'hélicoptère Ingenuity a effectué un court vol historique sur Mars...
                Le premier vol d’un engin motorisé sur une autre planète vient d’être réalisé ce lundi 19 avril....
              </p>
          </div>
          <div class="card-action">
            <a href="#">Consulter l'article</a>
          </div>
        </div>
      </div>
    </div>

    <!-- <img src="./img/img2.jpg" class="brand-logo" alt=""> -->
    <li><a href="home.html" class="blue darken-1">HOME</a></li>
    <li><a href="contact.html" class="blue darken-1">Contact</a></li>
    <li><a href="information.html" class="blue darken-1">Information</a></li>
    <li><a href="blog.html" class="blue darken-1">Blog</a></li>
  </ul>

  <div class="container">
    <div class="row">
      <div class="col l6 s12">
        <h5 class="dark-text">En ce moment.........</h5>
        
      </div>
    </div>

    <div class="row">
      <div class="col s12 m8">
        <div class="card">
          <div class="card-image">
            <img src="./img/img1.jpg">
            <span class="card-title">Espace : l'hélicoptère Ingenuity</span>
          </div>
          <div class="card-content">
            <p>19/04 Mars : le premier vol d'Ingenuity sur la planète rouge......</p>
            <p>MARS - L'hélicoptère de la Nasa Ingenuity a réussi à effectuer
              ................ </p>
          </div>
          <div class="card-action">
            <a href="#">Pour en savoir plus</a>
          </div>
        </div>
      </div>
    </div>
    <!-- <section> -->
    <div class="row">
      <div class="col s12 m8">
        <div class="card">
          <div class="card-image">
            <img src="./img/img2.jpg">
            <span class="card-title">Le rover de la NASA Perseverance</span>
          </div>
          <div class="card-content">
            <p> 19/04 Le rover de la NASA Perseverance a fabriqué de l'oxygène sur Mars
              Conçu au Massachusetts Institute of Technology (MIT), le « Mars Oxygen In-Situ Resource Utilization
              Experiment » (Moxie), une boîte située à l'avant droit du rover, a produit 5 grammes d'oxygène, de quoi
              respirer p...............
            </p>
            <p>Une partie de l’image récemment publiée par la Nasa, montrant des dunes............
            </p>
          </div>
          <div class="card-action">
            <a href="#">Consulter l'article 2</a>
          </div>
        </div>
      </div>
    </div>
    <!-- </section> -->

    <!-- <section> -->
    <div class="row">
      <div class="col s12 m8">
        <div class="card">
          <div class="card-image">
            <img src="./img/img3.jpg">
            <span class="card-title">« Premier drone à voler sur une autre planète »</span>
          </div>
          <div class="card-content">
            <p>18/04</p>
              <p>
                Jeff Delaune avec le drone Ingenuity, lors de l’alignement des capteurs de navigation au Jet Propulsion Laboratory (JPL) de l’agence spatiale américaine (Nasa)
                Ingenuity. Un Rennais à l’origine du « premier drone à voler sur une autre planète » ce lundi...............
              </p>
          </div>
          <div class="card-action">
            <a href="#">Consulter l'article 3</a>
          </div>
        </div>
      </div>
    </div>
    <!-- </section> -->

    <!-- <section> -->
      <div class="row">
        <div class="col s12 m8">
          <div class="card">
            <div class="card-image">
              <img src="./img/img4.jpg">
              <span class="card-title">L’ombre d’Ingenuity durant son premier vol</span>
            </div>
            <div class="card-content">
              <p>19/04 : </p>
              <p>L’ombre d’Ingenuity durant son premier vol au-dessus du sol martien, le 19 avril 2021.
                L’hélicoptère Ingenuity entre dans l’Histoire en réalisant l’exploit de voler sur Mars
                Le premier vol d’un engin ......................</p>
            </div>
            <div class="card-action">
              <a href="#">Consulter l'article 4</a>
            </div>
          </div>
        </div>
      </div>
      <!-- </section> -->








    <ul class="pagination">
      <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
      <li class="active"><a href="#!">1</a></li>
      <li class="waves-effect"><a href="#!">2</a></li>
      <li class="waves-effect"><a href="#!">3</a></li>
      <li class="waves-effect"><a href="#!">4</a></li>
      <li class="waves-effect"><a href="#!">5</a></li>
      <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
    </ul>

    <!-- <script type="text/javascript" src="js/login.js"></script>       -->
    <script src="./js/jquery-3.6.0.js"></script>
    <script src="cordova.js"></script>
    <script src="js/index.js"></script>
    <script src="./js/materialize.js"></script>


    <script>

      var articlesManager = {

        showPersonList: function () {
          $.ajax({
            url: "https://localhost:55557/articles/",
            type: "GET",
            cache: false,
            dataType: 'json',
            success: function (data) {
              // console.log(data);
              // $('#personList li').remove();
              $.each(data, function (index, article) {
                $('<li>')
                  .text(personne.nom + ' / ' + personne.prenom)
                  .attr('value', personne.id).appendTo($('#personList'))
                  .append("<button onclick=\"personManager.showPersonDetails(\'" + personne.id + "\');\" >Edit</button>")
                  ;
              });
              $('#personListPanel').show();
            }
          });
        },
        showPersonDetails: function (id) {
          if (id == null) return;
          $('#personSearchPanel').hide();
          $.ajax({
            url: "https://server-rest-api.herokuapp.com/personnes/" + id, // La ressource ciblée, pour Android utiliser http://10.0.2.2:5556/personnes/
            type: "GET", // Le type de la requête HTTP,
            cache: false, // n'enregistre pas temporairement des copies de données
            dataType: 'json', //  Le type de données à recevoir, ici, du json
            success: function (person) {
              console.log(person);
              $('#personDetailsPanel').show();
              $('#id').attr('value', person.id);
              $('#nom').attr('value', person.nom).focus();
              $('#prenom').attr('value', person.prenom);
            }
          });
        },

        backtoSearch: function () {
          $('#personDetailsPanel').hide();
          $('#personSearchPanel').show();
          $('#personList').focus();
        },
        collectFieldsValues: function () {
          return {
            id: $('#id').val(),
            nom: $('#nom').val(),
            prenom: $('#prenom').val(),
          }
        },

        refreshSearch: function () {
          this.backtoSearch();
          this.showPersonList();
        },

        newPerson: function () {
          $('#personSearchPanel').hide();
          $('#personDetailsPanel').show();
          $('#id').attr('value', null);
          $('#nom').attr('value', 'New Person').focus().select();
          $('#prenom').attr('value', 'New Person');

        },

        savePerson: function () {
          if (!confirm('Save ?')) return false;
          var requestType = $('#id').val() != '' ? 'PUT' : 'POST';
          $.ajax({
            url: "https://server-rest-api.herokuapp.com/personnes/" + $('#id').val(), // La ressource ciblée, pour Android utiliser http://10.0.2.2:5556/personnes/
            type: requestType, // Le type de la requête HTTP,
            data: personManager.collectFieldsValues(), // On passe nos données à l'url
            cache: false, // n'enregistre pas temporairement des copies de données
            dataType: 'json', //  Le type de données à recevoir, ici, du json
            success: function (result) {
              if (result.error) {
                alert(result.error[0].message);
              } else {
                if (requestType == 'POST')
                  alert('ID de la nouvelle entrée : ' + result.id);
                personManager.refreshSearch();
              }
            }
          });
        },

        deletePerson: function () {
          if (!confirm('Delete ?')) return;
          $.ajax({
            url: "https://server-rest-api.herokuapp.com/personnes/" + $('#id').val(), // La ressource ciblée, pour Android utiliser http://10.0.2.2:5556/personnes/
            type: "delete", // Le type de la requête HTTP,
            dataType: 'json', //  Le type de données à recevoir, ici, du json
            success: function (result) {
              if (result.error)
                alert(result.error[0].message);
              else
                personManager.refreshSearch();
            }
          });

        }
      }

      $(document).ready(function () {

        $('#personListPanel, #personDetailsPanel').hide();

        $('#findButton').click(function (e) {
          e.preventDefault();
          personManager.showPersonList();
        })

        // $('#showDetailsButton').click(function (e) {
        //     e.preventDefault();
        //     personManager.showPersonDetails($('#personList').val());
        // })

        $('#backtoSearchButton').click(function (e) {
          e.preventDefault();
          personManager.backtoSearch();
        })

        $('#newButton').click(function (e) {
          e.preventDefault();
          personManager.newPerson();
        })

        $('#saveButton').click(function (e) {
          e.preventDefault();
          personManager.savePerson();
        })

        $('#deleteButton').click(function (e) {
          e.preventDefault();
          personManager.deletePerson();
        })


      })

    </script>

</body>

</html>